{"version":3,"sources":["webpack:///./src/api/rank.js","webpack:///./src/components/rank/rank.vue?824c","webpack:///src/components/rank/rank.vue","webpack:///./src/components/rank/rank.vue?9591","webpack:///./src/components/rank/rank.vue","webpack:///./src/components/rank/rank.vue?e9fe"],"names":["getTopList","url","data","Object","assign","commonParams","uin","needNewCode","platform","jsonp","options","getMusicList","topid","tpl","page","type","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","topList","_l","item","index","key","on","click","$event","selectItem","directives","name","rawName","value","expression","width","height","song","_v","_s","songname","singername","length","staticRenderFns","rankvue_type_script_lang_js_","mixins","mixin","components","Scroll","scroll_scroll","Loading","loading","created","_getTopList","methods","objectSpread","handlePlaylist","playlist","bottom","$refs","rank","style","toplist","refresh","_this","then","res","code","config","$router","push","path","concat","id","setTopList","vuex_esm","rank_rankvue_type_script_lang_js_","component","componentNormalizer","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_rank_vue_vue_type_style_index_0_id_4bc90d5d_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_rank_vue_vue_type_style_index_0_id_4bc90d5d_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"8MAGO,SAASA,IACd,IAAMC,EAAM,qDAENC,EAAOC,OAAOC,UAAWC,QAC7BC,IAAK,EACLC,YAAa,EACbC,SAAU,OAGZ,OAAOC,eAAMR,EAAKC,EAAMQ,QAGnB,SAASC,EAAaC,GAC3B,IAAMX,EAAM,sDAENC,EAAOC,OAAOC,UAAWC,QAC7BO,QACAL,YAAa,EACbD,IAAK,EACLO,IAAK,EACLC,KAAM,SACNC,KAAM,MACNP,SAAU,OAGZ,OAAOC,eAAMR,EAAKC,EAAMQ,qDC5B1B,IAAAM,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,OAAAC,YAAA,SAA8BH,EAAA,UAAeE,IAAA,UAAAC,YAAA,UAAAC,OAA2CvB,KAAAe,EAAAS,WAAoBL,EAAA,KAAAJ,EAAAU,GAAAV,EAAA,iBAAAW,EAAAC,GAAoD,OAAAR,EAAA,MAAgBS,IAAAD,EAAAL,YAAA,OAAAO,IAAiCC,MAAA,SAAAC,GAAyBhB,EAAAiB,WAAAN,OAAuBP,EAAA,OAAYG,YAAA,SAAmBH,EAAA,OAAYc,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAV,EAAA,OAAAW,WAAA,gBAA0Ed,OAASe,MAAA,MAAAC,OAAA,WAA8BpB,EAAA,MAAaG,YAAA,YAAuBP,EAAAU,GAAAC,EAAA,kBAAAc,EAAAb,GAA6C,OAAAR,EAAA,MAAgBS,IAAAD,EAAAL,YAAA,SAA6BH,EAAA,QAAAJ,EAAA0B,GAAA1B,EAAA2B,GAAAf,EAAA,MAAAR,EAAA,QAAAJ,EAAA0B,GAAA1B,EAAA2B,GAAAF,EAAAG,UAAA,IAAA5B,EAAA2B,GAAAF,EAAAI,yBAAuHzB,EAAA,OAAac,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAArB,EAAAS,QAAAqB,OAAAR,WAAA,oBAAsFf,YAAA,sBAAkCH,EAAA,iBAAAA,EAAA,oBAC35B2B,yFC8BAC,GACAb,KAAA,OACAc,QAAAC,EAAA,MACAC,YACAC,OAAAC,EAAA,KACAC,QAAAC,EAAA,MAEAtD,KAPA,WAQA,OACAwB,aAGA+B,QAZA,WAaAvC,KAAAwC,eAEAC,QAAWxD,OAAAyD,EAAA,KAAAzD,EACX0D,eADA,SACAC,GACA,IAAAC,EAAAD,EAAAf,OAAA,YACA7B,KAAA8C,MAAAC,KAAAC,MAAAH,SACA7C,KAAA8C,MAAAG,QAAAC,WAEAV,YANA,WAMA,IAAAW,EAAAnD,KACMf,OAAA8D,EAAA,KAAA9D,GAANmE,KAAA,SAAAC,GACAA,EAAAC,OAAAC,EAAA,OACAJ,EAAA3C,QAAA6C,EAAArE,KAAAwB,YAIAQ,WAbA,SAaAN,GACAV,KAAAwD,QAAAC,MACAC,KAAA,SAAAC,OAAAjD,EAAAkD,MAEA5D,KAAA6D,WAAAnD,KAEAzB,OAAA6E,EAAA,KAAA7E,EACA4E,WAAA,mBClE6VE,EAAA,0BCQ7VC,EAAgB/E,OAAAgF,EAAA,KAAAhF,CACd8E,EACAjE,EACAgC,GACF,EACA,KACA,WACA,MAIAkC,EAAAxE,QAAA0E,OAAA,WACeC,EAAA,WAAAH,oECpBf,IAAAI,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAwjBE,EAAG","file":"js/rank.dbb8c251.js","sourcesContent":["import jsonp from '@/common/js/jsonp'\r\nimport {commonParams, options} from './config'\r\n\r\nexport function getTopList() { // 排行榜数据\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    uin: 0,\r\n    needNewCode: 1,\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport function getMusicList(topid) { //获取对应排行分类下具体歌曲列表\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    topid,\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"rank\",staticClass:\"rank\"},[_c('scroll',{ref:\"toplist\",staticClass:\"toplist\",attrs:{\"data\":_vm.topList}},[_c('ul',_vm._l((_vm.topList),function(item,index){return _c('li',{key:index,staticClass:\"item\",on:{\"click\":function($event){_vm.selectItem(item)}}},[_c('div',{staticClass:\"icon\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.picUrl),expression:\"item.picUrl\"}],attrs:{\"width\":\"100\",\"height\":\"100\"}})]),_c('ul',{staticClass:\"songlist\"},_vm._l((item.songList),function(song,index){return _c('li',{key:index,staticClass:\"song\"},[_c('span',[_vm._v(_vm._s(index + 1))]),_c('span',[_vm._v(_vm._s(song.songname)+\"-\"+_vm._s(song.singername))])])}))])})),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.topList.length),expression:\"!topList.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)]),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"rank\" ref=\"rank\">\r\n    <scroll :data=\"topList\" class=\"toplist\" ref=\"toplist\">\r\n      <ul>\r\n        <li @click=\"selectItem(item)\" :key=\"index\" class=\"item\" v-for=\"(item, index) in topList\">\r\n          <div class=\"icon\">\r\n            <img width=\"100\" height=\"100\" v-lazy=\"item.picUrl\"/>\r\n          </div>\r\n          <ul class=\"songlist\">\r\n            <li class=\"song\" :key=\"index\" v-for=\"(song,index) in item.songList\">\r\n              <span>{{index + 1}}</span>\r\n              <span>{{song.songname}}-{{song.singername}}</span>\r\n            </li>\r\n          </ul>\r\n        </li>\r\n      </ul>\r\n      <div class=\"loading-container\" v-show=\"!topList.length\">\r\n        <loading></loading>\r\n      </div>\r\n    </scroll>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters, mapMutations} from 'vuex'\r\nimport Scroll from '@/base/scroll/scroll'\r\nimport {playlistMixin} from '@/common/js/mixin'\r\nimport Loading from '@/base/loading/loading'\r\nimport {getTopList} from '@/api/rank'\r\nimport {ERR_OK} from '@/api/config'\r\nexport default {\r\n  name: 'Rank',\r\n  mixins: [playlistMixin],\r\n  components: {\r\n    Scroll,\r\n    Loading\r\n  },\r\n  data() {\r\n    return {\r\n      topList: [],\r\n    }\r\n  },\r\n  created() {\r\n    this._getTopList()\r\n  },\r\n  methods: {\r\n    handlePlaylist(playlist) {\r\n      const bottom = playlist.length > 0 ? '60px' : '' // 当存在播放队列\r\n      this.$refs.rank.style.bottom = bottom  // 用于处理当底部存在mini播放器时遮挡底部列表的bug\r\n      this.$refs.toplist.refresh()\r\n    },\r\n    _getTopList() {\r\n      getTopList().then(res => {\r\n        if (res.code === ERR_OK) {\r\n          this.topList = res.data.topList\r\n        }\r\n      })\r\n    },\r\n    selectItem(item) {\r\n      this.$router.push({\r\n        path: `/rank/${item.id}`\r\n      })\r\n      this.setTopList(item)\r\n    },\r\n    ...mapMutations({\r\n      'setTopList': 'SET_TOP_LIST'\r\n    }),\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n  @import \"~@/common/stylus/variable\"\r\n  @import \"~@/common/stylus/mixin\"\r\n  .rank\r\n    position: fixed\r\n    width: 100%\r\n    top: 88px\r\n    bottom: 0\r\n    .toplist\r\n      height: 100%\r\n      overflow: hidden\r\n      .item\r\n        display: flex\r\n        margin: 0 20px\r\n        padding-top: 20px\r\n        height: 100px\r\n        &:last-child\r\n          padding-bottom: 20px\r\n        .icon\r\n          flex: 0 0 100px\r\n          width: 100px\r\n          height: 100px\r\n        .songlist\r\n          flex: 1\r\n          display: flex\r\n          flex-direction: column\r\n          justify-content: center\r\n          padding: 0 20px\r\n          height: 100px\r\n          overflow: hidden\r\n          background: $color-highlight-background\r\n          color: $color-text-d\r\n          font-size: $font-size-small\r\n          .song\r\n            no-wrap()\r\n            line-height: 26px\r\n            text-align: left \r\n      .loading-container\r\n        position: absolute\r\n        width: 100%\r\n        top: 50%\r\n        transform: translateY(-50%)\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rank.vue?vue&type=template&id=4bc90d5d&scoped=true&\"\nimport script from \"./rank.vue?vue&type=script&lang=js&\"\nexport * from \"./rank.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rank.vue?vue&type=style&index=0&id=4bc90d5d&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bc90d5d\",\n  null\n  \n)\n\ncomponent.options.__file = \"rank.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=style&index=0&id=4bc90d5d&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rank.vue?vue&type=style&index=0&id=4bc90d5d&scoped=true&lang=stylus&\""],"sourceRoot":""}